# tests/test_masks.py
import pytest
from src.widget import mask_account_card


@pytest.mark.parametrize("input_data, expected", [
    # Тесты для счетов
    ("Счет 1234567890123456", "Счет **3456"),
    ("Счет 12345678901234567890", "Счет **7890"),
    ("Счет  1234567890  ", "Счет **7890"),  # С лишними пробелами
    ("Счет1234567890", "Счет **7890"),  # Без пробела после "Счет"

    # Тесты для карт
    ("Visa Platinum 1234567890123456", "Visa Platinum 1234 56** **** 3456"),
    ("MasterCard 1234567890123456", "MasterCard 1234 56** **** 3456"),
    ("МИР 1234567890123456", "МИР 1234 56** **** 3456"),
    ("Visa 1234567890123456", "Visa 1234 56** **** 3456"),
    ("1234567890123456", "1234 56** **** 3456"),  # Без названия карты
    ("Card 1234 5678 9012 3456", "Card 1234 56** **** 3456"),  # С пробелами в номере

    # Тесты с разным форматированием
    ("Visa: 1234 5678 9012 3456", "Visa: 1234 56** **** 3456"),
    ("Карта (основная) 1234567890123456", "Карта (основная) 1234 56** **** 3456"),

    # Тесты для пограничных случаев
    ("Счет ", "Счет **"),  # Пустой номер счета
    ("", ""),  # Пустая строка
    ("Счет", "Счет"),  # Только слово "Счет" без номера
    ("Счетнекорректныйномер", "Счет **"),
    ("1234", "1234"),  # Слишком короткий номер карты
    ("Длинное название карты 1234567890123456", "Длинное название карты 1234 56** **** 3456")  # Исправлено ожидание
])
def test_mask_account_card(input_data, expected):
    assert mask_account_card(input_data) == expected
